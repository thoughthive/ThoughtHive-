<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Add Article — ThoughtHive</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
<style>
  *{box-sizing:border-box}
  body{
    margin:0;font-family:Inter, -apple-system, "Segoe UI", Roboto, sans-serif;
    min-height:100vh;display:flex;align-items:center;justify-content:center;
    background: linear-gradient(180deg, rgba(9,12,16,0.6), rgba(8,10,12,0.9)), url('https://images.unsplash.com/photo-1496307042754-b4aa456c4a2d?auto=format&fit=crop&w=1920&q=80') center/cover no-repeat;
    color:#fff;
  }
  .card{ width:92%; max-width:640px; border-radius:16px; background: rgba(255,255,255,0.06); padding:26px; backdrop-filter: blur(14px); box-shadow:0 14px 50px rgba(2,6,10,0.6);}
  h2{ margin:0 0 14px 0; font-size:1.4rem; color:#eaf6ff;}
  label{ display:block; font-size:0.9rem; color:#dff6ff; margin-top:12px; margin-bottom:6px; font-weight:600;}
  input[type="text"], textarea, select{
    width:100%; padding:12px; border-radius:10px; border: none; background: rgba(255,255,255,0.06); color:#fff; outline:none; font-size:1rem;
  }
  textarea{ min-height:140px; resize:vertical; }
  .row{ display:flex; gap:12px; margin-top:12px; }
  .btns{ display:flex; gap:10px; margin-top:18px; }
  .btn{ padding:12px 16px; border-radius:12px; border:0; cursor:pointer; font-weight:700; }
  .btn.primary{ background:var(--accent, #0aa1ff); color:#012; }
  .btn.ghost{ background:transparent; color:#dff6ff; border:1px solid rgba(255,255,255,0.06); }
  .close-x{ position:fixed; top:18px; left:18px; width:40px; height:40px; border-radius:50%; border:0; background: rgba(255,255,255,0.06); color:#fff; font-size:20px; cursor:pointer;}
  @media(max-width:640px){ .card{padding:18px} h2{font-size:1.2rem} }
</style>
</head>
<body>

<button class="close-x" onclick="location.href='index.html'">✖</button>

<div class="card" role="form" aria-labelledby="add-heading">
  <h2 id="add-heading">Publish a new article</h2>

  <label for="title">Title</label>
  <input id="title" type="text" placeholder="Short, descriptive title" />

  <label for="content">Content</label>
  <textarea id="content" placeholder="Write the article..."></textarea>

  <div class="row">
    <div style="flex:1">
      <label for="author">Your name</label>
      <input id="author" type="text" placeholder="Author name (you)" />
    </div>
    <div style="width:200px">
      <label for="category">Category</label>
      <select id="category">
        <option value="">Select category</option>
        <option>Animals</option><option>Cars</option><option>Engineering</option><option>Technology</option><option>Lifestyle</option><option>Other</option>
      </select>
    </div>
  </div>

  <label for="customCat">Or custom category (optional)</label>
  <input id="customCat" type="text" placeholder="Create a category (optional)" />

  <div class="btns">
    <button class="btn primary" id="publishBtn">Publish</button>
    <button class="btn ghost" onclick="location.href='index.html'">Cancel</button>
  </div>
  <p style="margin-top:12px;color:rgba(220,240,255,0.8);font-size:0.88rem">Tip: Fill category (or enter custom) — articles will be saved with that category.</p>
</div>

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
<script>
  const ADMIN_NAME = "Divyansh"; // change to your admin name if you like

  const firebaseConfig = {
    apiKey: "AIzaSyAQ4oeDRpMPkpxtcxq-xe7qRwUfIrhUztw",
    authDomain: "thoughthive-ebf0d.firebaseapp.com",
    projectId: "thoughthive-ebf0d",
    storageBucket: "thoughthive-ebf0d.firebasestorage.app",
    messagingSenderId: "254009291887",
    appId: "1:254009291887:web:b5ce7301fb673ba257499a",
    measurementId: "G-5C2Q4SDZ3Y"
  };
  firebase.initializeApp(firebaseConfig);
  const db = firebase.firestore();

  document.getElementById('publishBtn').addEventListener('click', async ()=>{
    const title = document.getElementById('title').value.trim();
    const content = document.getElementById('content').value.trim();
    const author = document.getElementById('author').value.trim();
    let category = document.getElementById('category').value;
    const custom = document.getElementById('customCat').value.trim();
    if(custom) category = custom;
    if(!title || !content || !author || !category){
      alert('Please fill Title, Content, Author and Category (or enter a custom category).');
      return;
    }
    try{
      await db.collection('articles').add({
        title, content, author, category,
        timestamp: firebase.firestore.FieldValue.serverTimestamp()
      });
      // success
      alert('Article published!');
      // remember author locally (for admin/comment deletion convenience)
      localStorage.setItem('th_user_name', author);
      location.href = 'index.html';
    }catch(err){
      console.error(err);
      alert('Error posting: '+err.message);
    }
  });
</script>
</body>
</html>
