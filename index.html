<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>ThoughtHive</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
<style>
  :root{
    --accent:#0aa1ff;
    --glass: rgba(255,255,255,0.06);
    --glass-strong: rgba(255,255,255,0.12);
    --card: rgba(0,0,0,0.55);
  }
  *{box-sizing:border-box}
  body{
    margin:0;
    font-family:Inter, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
    min-height:100vh;
    color:#fff;
    background: linear-gradient(180deg, rgba(12,18,25,0.6), rgba(10,14,20,0.9)), url('https://images.unsplash.com/photo-1503264116251-35a269479413?auto=format&fit=crop&w=1920&q=80') center/cover no-repeat;
    -webkit-font-smoothing:antialiased;
    display:flex; flex-direction:column;
  }

  /* header */
  header{
    padding:28px 22px;
    text-align:center;
    backdrop-filter: blur(8px);
  }
  header h1{margin:0;font-size:2.4rem;letter-spacing:0.6px;color:#fff;text-shadow:0 6px 30px rgba(10,10,10,0.45);}

  /* category tabs */
  .category-bar{
    display:flex;
    gap:10px;
    justify-content:center;
    align-items:center;
    padding:12px 16px;
    margin: 0 16px;
    flex-wrap:wrap;
  }
  .cat-btn{
    background:var(--glass);
    border:1px solid rgba(255,255,255,0.06);
    color: #e8f7ff;
    padding:8px 14px;
    border-radius:20px;
    cursor:pointer;
    font-weight:600;
    transition:transform .18s, background .18s;
    white-space:nowrap;
  }
  .cat-btn.active{ background: var(--accent); color:#012; transform:translateY(-2px); box-shadow:0 8px 30px rgba(10,10,10,0.5);}

  /* main container */
  .main {
    max-width:1100px;
    width:100%;
    margin: 18px auto;
    padding: 0 20px 60px;
    flex:1;
    display:flex;
    flex-direction:column;
    gap:18px;
  }

  /* top controls */
  .controls{
    display:flex;
    gap:12px;
    align-items:center;
    justify-content:space-between;
    flex-wrap:wrap;
  }
  .controls-left{
    display:flex;
    gap:12px;
    flex-wrap:wrap;
    align-items:center;
  }
  .search{
    background: var(--glass-strong);
    border-radius:12px;
    padding:8px 12px;
    min-width:260px;
    max-width:520px;
    display:flex;
    align-items:center;
    gap:8px;
  }
  .search input{
    background:transparent;border:0;color:#fff;outline:none;font-size:0.98rem;width:100%;
  }
  .filter{
    background:var(--glass);
    padding:8px 10px;border-radius:10px;color:#fff;border:1px solid rgba(255,255,255,0.04);
    font-weight:600;
  }

  /* articles grid */
  .articles-grid{
    display:grid;
    grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
    gap:28px; /* increased spacing between tiles */
    margin-top:6px;
  }
  .card{
    background: var(--card);
    border-radius:16px;
    padding:20px;
    color:#fff;
    transition: transform .22s, box-shadow .22s, background .22s;
    cursor:pointer;
    display:flex;
    flex-direction:column;
    gap:10px;
    min-height:120px;
    box-shadow: 0 10px 30px rgba(2,6,10,0.45);
    border: 1px solid rgba(255,255,255,0.03);
  }
  .card:hover{ transform:translateY(-6px); background: rgba(255,255,255,0.07) }

  .card h3{ margin:0; font-size:1.12rem; color:#eaf6ff; }
  .meta{ color:#cfeeff; opacity:.9; font-size:0.9rem; display:flex; justify-content:space-between; align-items:center;}
  .tag{ background: rgba(255,255,255,0.08); padding:6px 10px;border-radius:12px;font-weight:600;color:#dff7ff; font-size:0.82rem; }

  /* floating buttons */
  #add-btn {
    position:fixed; left:22px; bottom:22px; width:60px; height:60px;
    border-radius:50%; border:0; background:rgba(255,255,255,0.13);
    color:#fff; font-size:30px; display:flex; align-items:center; justify-content:center; cursor:pointer;
    box-shadow: 0 8px 30px rgba(2,6,10,0.5);
    backdrop-filter: blur(8px);
  }
  #info-btn {
    position:fixed; right:22px; bottom:22px; width:52px; height:52px; border-radius:50%; border:0;
    background: rgba(255,255,255,0.06); color:#fff; font-size:18px; cursor:pointer; display:flex;align-items:center;justify-content:center;
    box-shadow: 0 8px 30px rgba(2,6,10,0.45);
    backdrop-filter: blur(6px);
  }

  /* sticky footer */
  footer{
    background: rgba(0,0,0,0.55);
    color:#d9eefc;
    padding:14px 20px;
    text-align:center;
    font-size:13px;
  }

  /* terms modal */
  #terms { display:none; position:fixed; inset:0; background:rgba(0,0,0,0.8); padding:40px; overflow:auto; }
  .terms-card{ max-width:860px; margin:40px auto; background:#fff; color:#111; border-radius:12px; padding:22px; }
  .close-terms{ float:right; background:var(--accent); color:#012; border:0; padding:8px 12px; border-radius:8px; cursor:pointer; }

  /* theme toggle */
  #theme-toggle{ position:fixed; top:18px; right:18px; border-radius:18px; padding:8px 12px; border:0; background: rgba(255,255,255,0.08); color:#fff; cursor:pointer;}

  /* responsive tweaks */
  @media (max-width:640px){
    header h1{font-size:1.6rem}
    .articles-grid{ gap:18px; }
    .search{ min-width:120px; max-width:320px; }
  }
</style>
</head>
<body>
  <!-- ADMIN name: change if you want -->
  <script>const ADMIN_NAME = "Divyansh";</script>

  <header>
    <h1>ThoughtHive</h1>
  </header>

  <div class="category-bar" id="categoryBar">
    <!-- dynamic categories inserted by JS (default list below) -->
  </div>

  <div class="main">
    <div class="controls">
      <div class="controls-left">
        <div class="search" title="Search by title">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" style="opacity:.8"><path d="M21 21l-4.35-4.35" stroke="#fff" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/><circle cx="11" cy="11" r="6" stroke="#fff" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/></svg>
          <input id="searchInput" placeholder="Search articles..." />
        </div>
        <select id="categoryFilter" class="filter" title="Filter by category">
          <option value="">All categories</option>
        </select>
      </div>

      <div class="controls-right">
        <!-- reserved for future controls -->
      </div>
    </div>

    <div class="articles-grid" id="articlesGrid">
      <!-- article cards populated by JS -->
    </div>
  </div>

  <button id="add-btn" title="Add article">+</button>
  <button id="info-btn" title="Terms">i</button>
  <button id="theme-toggle" title="Toggle light/dark">ðŸŒ™</button>

  <div id="terms">
    <div class="terms-card">
      <button class="close-terms" onclick="closeTerms()">Close âœ–</button>
      <h2>Terms & Conditions</h2>
      <p>ThoughtHive is a community platform. The developer is not responsible for user-generated content. Respect others' dignity; do not post offensive/illegal content. Users are responsible for their posts.</p>
    </div>
  </div>

  <footer>Â© 2025 ThoughtHive â€” be kind, be thoughtful.</footer>

  <!-- Firebase (compat) -->
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

  <script>
  // -------- Firebase config (your config supplied earlier) ----------
  const firebaseConfig = {
    apiKey: "AIzaSyAQ4oeDRpMPkpxtcxq-xe7qRwUfIrhUztw",
    authDomain: "thoughthive-ebf0d.firebaseapp.com",
    projectId: "thoughthive-ebf0d",
    storageBucket: "thoughthive-ebf0d.firebasestorage.app",
    messagingSenderId: "254009291887",
    appId: "1:254009291887:web:b5ce7301fb673ba257499a",
    measurementId: "G-5C2Q4SDZ3Y"
  };
  firebase.initializeApp(firebaseConfig);
  const db = firebase.firestore();

  // ---------- UI & data ----------
  const DEFAULT_CATEGORIES = ["All","Animals","Cars","Engineering","Technology","Lifestyle","Education","Science","Travel"];
  const categoryBar = document.getElementById('categoryBar');
  const categoryFilter = document.getElementById('categoryFilter');
  const articlesGrid = document.getElementById('articlesGrid');
  const searchInput = document.getElementById('searchInput');

  // populate category bar and dropdown
  function buildCategories(){
    categoryBar.innerHTML = '';
    DEFAULT_CATEGORIES.forEach(cat=>{
      const btn = document.createElement('button');
      btn.className = 'cat-btn' + (cat === 'All' ? ' active' : '');
      btn.textContent = cat;
      btn.dataset.cat = cat === 'All' ? '' : cat;
      btn.addEventListener('click', ()=> {
        document.querySelectorAll('.cat-btn').forEach(b=>b.classList.remove('active'));
        btn.classList.add('active');
        categoryFilter.value = btn.dataset.cat;
        renderFiltered();
        window.scrollTo({top: 140, behavior:'smooth'});
      });
      categoryBar.appendChild(btn);
    });

    // dropdown
    categoryFilter.innerHTML = '<option value="">All categories</option>';
    DEFAULT_CATEGORIES.forEach(c=>{
      if(c === 'All') return;
      const o = document.createElement('option'); o.value = c; o.textContent = c;
      categoryFilter.appendChild(o);
    });
  }
  buildCategories();

  // load articles live
  let allArticles = [];
  db.collection('articles').orderBy('timestamp', 'desc').onSnapshot(snap=>{
    allArticles = [];
    snap.forEach(d=> allArticles.push({ id: d.id, ...d.data() }) );
    renderFiltered();
  });

  function renderFiltered(){
    const q = (searchInput.value || '').toLowerCase();
    const sel = categoryFilter.value || '';
    let list = allArticles.slice();
    if(sel) list = list.filter(a => (a.category||'').toLowerCase() === sel.toLowerCase());
    if(q) list = list.filter(a => (a.title||'').toLowerCase().includes(q));
    render(list);
  }

  function render(list){
    articlesGrid.innerHTML = '';
    if(list.length === 0){
      const note = document.createElement('div');
      note.style.color = 'rgba(220,240,255,0.9)';
      note.style.textAlign = 'center';
      note.style.opacity = '.9';
      note.textContent = 'No articles yet for this filter.';
      articlesGrid.appendChild(note);
      return;
    }
    list.forEach(a=>{
      const card = document.createElement('div'); card.className = 'card';
      const h = document.createElement('h3'); h.textContent = a.title || 'Untitled';
      const meta = document.createElement('div'); meta.className = 'meta';
      const by = document.createElement('div'); by.textContent = `by ${a.author || 'Unknown'}`;
      const tag = document.createElement('div'); tag.className='tag'; tag.textContent = a.category || 'General';
      meta.appendChild(by); meta.appendChild(tag);
      card.appendChild(h);
      const excerpt = document.createElement('p'); excerpt.textContent = (a.content||'').slice(0,140) + ( (a.content||'').length>140 ? 'â€¦' : '');
      card.appendChild(excerpt);
      card.appendChild(meta);
      card.addEventListener('click', ()=> {
        window.location.href = `article.html?id=${a.id}`;
      });
      articlesGrid.appendChild(card);
    });
  }

  // Controls
  searchInput.addEventListener('input', renderFiltered);
  categoryFilter.addEventListener('change', ()=> {
    // sync active tab
    document.querySelectorAll('.cat-btn').forEach(b=> b.classList.toggle('active', b.dataset.cat === categoryFilter.value));
    renderFiltered();
  });

  // Floating buttons
  document.getElementById('add-btn').addEventListener('click', ()=> window.location.href = 'add.html');
  document.getElementById('info-btn').addEventListener('click', ()=> document.getElementById('terms').style.display = 'block');
  function closeTerms(){ document.getElementById('terms').style.display = 'none' }
  window.closeTerms = closeTerms;

  // Theme toggle (simple)
  const themeToggle = document.getElementById('theme-toggle');
  themeToggle.addEventListener('click', ()=>{
    document.body.classList.toggle('light');
    themeToggle.textContent = document.body.classList.contains('light') ? 'â˜€' : 'ðŸŒ™';
  });

  // ensure rendering initial
  renderFiltered();

  </script>
</body>
</html>    
