<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ThoughtHive</title>
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
<style>
body {
  margin:0; font-family:'Roboto',sans-serif;
  background: url('https://images.unsplash.com/photo-1507525428034-b723cf961d3e?auto=format&fit=crop&w=1400&q=80') no-repeat center center fixed;
  background-size: cover; color:#fff;
}
header{ text-align:center; font-size:2rem; font-weight:700; padding:20px; backdrop-filter: blur(10px); background: rgba(0,0,0,0.5);}
.container{max-width:700px;margin:20px auto; display:flex; flex-direction:column; gap:15px;}
#search-bar, #category-filter{width:100%; padding:12px; border-radius:12px; border:none; font-size:1rem; background:rgba(255,255,255,0.1); color:#fff;}
.article-card{background:rgba(0,0,0,0.6);padding:15px 20px;border-radius:15px;cursor:pointer;transition:0.3s; display:flex; justify-content:space-between; align-items:center;}
.article-card:hover{background:rgba(0,0,0,0.75);}
.category-tag{font-size:0.8rem; color:#aaa; padding:2px 8px; border-radius:8px; background:rgba(255,255,255,0.1);}
.add-btn{background:#1DA1F2;color:#fff;border:none;padding:12px 20px;border-radius:12px;font-size:1rem;cursor:pointer;margin-top:10px;}
.add-btn:hover{background:#0d8ddb;}
footer{text-align:center;padding:10px;background: rgba(0,0,0,0.5);}
#info-btn{position:fixed; bottom:20px; right:20px; font-size:20px; width:50px; height:50px; border-radius:50%; border:none; background: rgba(29,161,242,0.8); color:#fff; cursor:pointer; font-weight:bold;}
#terms-modal{display:none; position:fixed; top:0; left:0; width:100%; height:100%; background: rgba(0,0,0,0.9); padding:50px 20px; box-sizing:border-box; overflow:auto;}
#terms-content{background:#111; color:#fff; padding:25px; border-radius:20px; max-width:800px; margin:auto; line-height:1.5;}
#close-terms{float:right; font-size:18px; background:#1DA1F2; color:#fff; border:none; border-radius:8px; padding:5px 10px; cursor:pointer;}
#theme-toggle{position:fixed; top:20px; right:20px; padding:10px 15px; border-radius:50px; border:none; cursor:pointer; background:#1DA1F2; color:#fff; z-index:1000;}
body.light-mode{background:#f2f2f2; color:#111;}
body.light-mode header, body.light-mode footer, body.light-mode .article-card{background:rgba(255,255,255,0.9); color:#111;}
body.light-mode input, body.light-mode textarea, body.light-mode select{background:rgba(0,0,0,0.05); color:#111;}
body.light-mode .category-tag{background:rgba(0,0,0,0.1); color:#333;}
</style>
</head>
<body>
<header>ThoughtHive</header>
<button id="theme-toggle">ðŸŒ™</button>
<div class="container">
  <input type="text" id="search-bar" placeholder="Search articles...">
  <select id="category-filter">
    <option value="">All Categories</option>
    <option value="Animal">Animal</option>
    <option value="Cars">Cars</option>
    <option value="Engineering">Engineering</option>
    <option value="Technology">Technology</option>
    <option value="Lifestyle">Lifestyle</option>
    <option value="Education">Education</option>
    <option value="Science">Science</option>
    <option value="Travel">Travel</option>
  </select>
  <button class="add-btn" onclick="window.location.href='add-article.html'">Add Article</button>
  <div id="articles"></div>
</div>
<footer>&copy; 2025 ThoughtHive</footer>
<button id="info-btn">i</button>

<div id="terms-modal">
  <div id="terms-content">
    <button id="close-terms">Close âœ–</button>
    <h2>Terms & Conditions</h2>
    <p>Developer is not responsible for user-generated content. Users must respect rights and dignity of others. Avoid posting offensive, illegal, or harmful material. You are responsible for your content.</p>
  </div>
</div>

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

<script>
const firebaseConfig = {
  apiKey: "AIzaSyAQ4oeDRpMPkpxtcxq-xe7qRwUfIrhUztw",
  authDomain: "thoughthive-ebf0d.firebaseapp.com",
  projectId: "thoughthive-ebf0d",
  storageBucket: "thoughthive-ebf0d.firebasestorage.app",
  messagingSenderId: "254009291887",
  appId: "1:254009291887:web:b5ce7301fb673ba257499a",
  measurementId: "G-5C2Q4SDZ3Y"
};
firebase.initializeApp(firebaseConfig);
const db = firebase.firestore();

let allArticles = [];
db.collection('articles').orderBy('timestamp','desc').onSnapshot(snapshot=>{
  allArticles=[];
  snapshot.forEach(doc=>allArticles.push({id:doc.id,...doc.data()}));
  renderArticles(allArticles);
});

function renderArticles(articles){
  const div = document.getElementById('articles');
  div.innerHTML='';
  articles.forEach(article=>{
    const card = document.createElement('div');
    card.className='article-card';
    card.innerHTML = `<span>${article.title}</span><span class="category-tag">${article.category||'General'}</span>`;
    card.onclick = ()=>{ window.location.href='article.html?id='+article.id; }
    div.appendChild(card);
  });
}

document.getElementById('search-bar').addEventListener('input', filterArticles);
document.getElementById('category-filter').addEventListener('change', filterArticles);
function filterArticles(){
  const query=document.getElementById('search-bar').value.toLowerCase();
  const category=document.getElementById('category-filter').value;
  let filtered = allArticles.filter(a=>a.title.toLowerCase().includes(query));
  if(category) filtered = filtered.filter(a=>a.category===category);
  renderArticles(filtered);
}

const infoBtn = document.getElementById('info-btn');
const termsModal = document.getElementById('terms-modal');
const closeTerms = document.getElementById('close-terms');
infoBtn.onclick = ()=>{ termsModal.style.display='block'; }
closeTerms.onclick = ()=>{ termsModal.style.display='none'; }
window.onclick = (event)=>{ if(event.target==termsModal) termsModal.style.display='none'; }

const toggleBtn = document.getElementById('theme-toggle');
toggleBtn.addEventListener('click', ()=>{
  document.body.classList.toggle('light-mode');
  toggleBtn.textContent = document.body.classList.contains('light-mode') ? 'â˜€' : 'ðŸŒ™';
});
</script>
</body>
</html>
