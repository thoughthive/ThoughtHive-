<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ThoughtHive</title>
  <style>
    body {
      font-family: 'Poppins', sans-serif;
      margin: 0;
      padding: 0;
      background: linear-gradient(135deg, #0d47a1, #1976d2, #42a5f5);
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      color: white;
      backdrop-filter: blur(10px);
    }

    header {
      width: 100%;
      display: flex;
      justify-content: space-between;
      align-items: center;
      background: rgba(255, 255, 255, 0.15);
      backdrop-filter: blur(20px);
      box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);
      padding: 15px 30px;
      position: sticky;
      top: 0;
      z-index: 100;
    }

    h1 {
      font-size: 26px;
      font-weight: bold;
      color: #e3f2fd;
    }

    #search-bar {
      border: none;
      padding: 10px 15px;
      border-radius: 20px;
      outline: none;
      background: rgba(255, 255, 255, 0.2);
      color: white;
      font-size: 14px;
      width: 200px;
    }

    #add-article-btn {
      font-size: 24px;
      background: rgba(255, 255, 255, 0.2);
      color: white;
      border: none;
      border-radius: 50%;
      width: 40px;
      height: 40px;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    #add-article-btn:hover {
      background: rgba(255, 255, 255, 0.4);
      transform: scale(1.1);
    }

    #articles-container {
      width: 90%;
      max-width: 700px;
      margin-top: 20px;
      display: flex;
      flex-direction: column;
      gap: 15px;
    }

    .article-card {
      background: rgba(255, 255, 255, 0.15);
      border-radius: 16px;
      padding: 20px;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 4px 15px rgba(0,0,0,0.2);
    }

    .article-card:hover {
      background: rgba(255, 255, 255, 0.25);
      transform: translateY(-3px);
    }

    #article-view {
      display: none;
      background: rgba(255, 255, 255, 0.15);
      border-radius: 16px;
      padding: 25px;
      margin-top: 20px;
      width: 90%;
      max-width: 700px;
      box-shadow: 0 4px 30px rgba(0, 0, 0, 0.3);
      animation: fadeIn 0.5s ease;
    }

    #add-article-form {
      display: none;
      background: rgba(255, 255, 255, 0.15);
      border-radius: 16px;
      padding: 25px;
      margin-top: 20px;
      width: 90%;
      max-width: 700px;
      box-shadow: 0 4px 30px rgba(0, 0, 0, 0.3);
      animation: fadeIn 0.5s ease;
    }

    input, textarea {
      width: 100%;
      margin-bottom: 10px;
      padding: 10px;
      border: none;
      border-radius: 8px;
      outline: none;
      background: rgba(255,255,255,0.2);
      color: white;
      font-size: 15px;
    }

    button {
      background-color: #1976d2;
      color: white;
      border: none;
      padding: 10px 18px;
      border-radius: 10px;
      cursor: pointer;
      font-weight: bold;
      transition: all 0.3s ease;
    }

    button:hover {
      background-color: #42a5f5;
    }

    footer {
      margin-top: auto;
      padding: 15px;
      background: rgba(255, 255, 255, 0.1);
      text-align: center;
      width: 100%;
      position: relative;
    }

    footer a {
      color: #bbdefb;
      text-decoration: underline;
      cursor: pointer;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }
  </style>
</head>
<body>
  <header>
    <h1>ThoughtHive</h1>
    <input type="text" id="search-bar" placeholder="Search articles...">
    <button id="add-article-btn" onclick="showAddArticleForm()">+</button>
  </header>

  <div id="articles-container"></div>

  <div id="add-article-form">
    <input type="text" id="title" placeholder="Enter title" required>
    <input type="text" id="author" placeholder="Your name" required>
    <textarea id="content" rows="5" placeholder="Write your article..." required></textarea>
    <input type="file" id="imageUpload" accept="image/*">
    <button onclick="postArticle()">Post</button>
    <button onclick="closeAddForm()">Cancel</button>
  </div>

  <div id="article-view">
    <div style="display:flex;justify-content:space-between;align-items:center;">
      <h2 id="article-title"></h2>
      <button id="close-btn" onclick="closeArticle()">Close âœ–</button>
    </div>
    <img id="article-image" style="width:100%;border-radius:12px;margin:10px 0;display:none;">
    <p id="article-content"></p>
    <p id="article-author" style="font-style:italic;opacity:0.8;"></p>
    <button id="delete-btn" onclick="deleteArticle()">Delete Article</button>
  </div>

  <footer>
    <a href="#" onclick="showTerms()">Terms & Conditions</a>
  </footer>

  <!-- Firebase -->
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-storage.js"></script>

  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyAQ4oeDRpMPkpxtcxq-xe7qRwUfIrhUztw",
      authDomain: "thoughthive-ebf0d.firebaseapp.com",
      projectId: "thoughthive-ebf0d",
      storageBucket: "thoughthive-ebf0d.firebasestorage.app",
      messagingSenderId: "254009291887",
      appId: "1:254009291887:web:b5ce7301fb673ba257499a",
      measurementId: "G-5C2Q4SDZ3Y"
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();
    const storage = firebase.storage();

    const articlesContainer = document.getElementById('articles-container');
    const articleView = document.getElementById('article-view');
    const addForm = document.getElementById('add-article-form');
    const searchBar = document.getElementById('search-bar');

    let selectedArticleId = null;

    function showAddArticleForm() {
      addForm.style.display = "block";
      articlesContainer.style.display = "none";
    }

    function closeAddForm() {
      addForm.style.display = "none";
      articlesContainer.style.display = "block";
    }

    async function postArticle() {
      const title = document.getElementById('title').value.trim();
      const author = document.getElementById('author').value.trim();
      const content = document.getElementById('content').value.trim();
      const file = document.getElementById('imageUpload').files[0];

      if (!title || !author || !content) {
        alert("Please fill all fields!");
        return;
      }

      let imageUrl = "";
      if (file) {
        const storageRef = storage.ref("articles/" + file.name);
        await storageRef.put(file);
        imageUrl = await storageRef.getDownloadURL();
      }

      await db.collection("articles").add({
        title, author, content, imageUrl, created: new Date()
      });

      document.getElementById('title').value = '';
      document.getElementById('author').value = '';
      document.getElementById('content').value = '';
      document.getElementById('imageUpload').value = '';

      closeAddForm();
      loadArticles();
    }

    function loadArticles() {
      db.collection("articles").orderBy("created", "desc").onSnapshot(snapshot => {
        articlesContainer.innerHTML = "";
        snapshot.forEach(doc => {
          const article = doc.data();
          const card = document.createElement("div");
          card.classList.add("article-card");
          card.textContent = article.title;
          card.onclick = () => openArticle(doc.id, article);
          articlesContainer.appendChild(card);
        });
      });
    }

    function openArticle(id, article) {
      selectedArticleId = id;
      articleView.style.display = "block";
      articlesContainer.style.display = "none";
      document.getElementById('article-title').textContent = article.title;
      document.getElementById('article-content').textContent = article.content;
      document.getElementById('article-author').textContent = "Written by: " + article.author;
      const img = document.getElementById('article-image');
      if (article.imageUrl) {
        img.src = article.imageUrl;
        img.style.display = "block";
      } else {
        img.style.display = "none";
      }
    }

    function closeArticle() {
      articleView.style.display = "none";
      articlesContainer.style.display = "block";
    }

    async function deleteArticle() {
      if (confirm("Are you sure you want to delete this article?")) {
        await db.collection("articles").doc(selectedArticleId).delete();
        closeArticle();
      }
    }

    function showTerms() {
      alert("Terms & Conditions:\n\nThis website is a platform for users to share their thoughts. The developer is not responsible for any harmful, disrespectful, or inappropriate content posted by users. All users must respect the dignity, safety, and rights of others when posting articles or comments.");
    }

    searchBar.addEventListener("input", () => {
      const search = searchBar.value.toLowerCase();
      const cards = document.querySelectorAll(".article-card");
      cards.forEach(card => {
        card.style.display = card.textContent.toLowerCase().includes(search) ? "block" : "none";
      });
    });

    loadArticles();
  </script>
</body>
</html>                
