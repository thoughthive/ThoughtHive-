<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ThoughtHive</title>
<style>
body {
  margin:0;
  font-family:Arial,sans-serif;
  background: url('https://images.unsplash.com/photo-1604079629993-8db8926c3eaa?auto=format&fit=crop&w=1400&q=80') no-repeat center center fixed;
  background-size: cover;
  color:#fff;
  display:flex;
  flex-direction:column;
  min-height:100vh;
}
.page-container{
  flex:1;
  display:flex;
  flex-direction:column;
  padding:20px;
  backdrop-filter:blur(8px);
}
header{
  text-align:center;
  font-size:2em;
  font-weight:bold;
  margin-bottom:20px;
}
.container{
  max-width:600px;
  margin:0 auto;
  flex:1;
}
#search-bar,#category-filter{
  width:100%;
  padding:10px;
  border-radius:10px;
  border:none;
  margin-bottom:10px;
  font-size:1em;
  background: rgba(0,0,0,0.5);
  color:#fff;
}
#articles{
  display:flex;
  flex-direction:column;
  gap:15px;
}
.article-title{
  background:rgba(0,0,0,0.7);
  padding:15px;
  border-radius:15px;
  cursor:pointer;
  backdrop-filter:blur(5px);
  font-weight:bold;
  transition:0.3s;
}
.article-title:hover{
  background:rgba(0,0,0,0.85);
}
footer{
  text-align:center;
  padding:10px;
  font-size:0.9em;
}
#info-btn{
  position:fixed;
  bottom:20px;
  right:20px;
  font-size:22px;
  width:50px;
  height:50px;
  border-radius:50%;
  border:none;
  background:rgba(23,162,184,0.8);
  color:white;
  cursor:pointer;
  font-weight:bold;
  backdrop-filter:blur(5px);
  z-index:9999;
}
#terms-modal{
  display:none;
  position:fixed;
  top:0;
  left:0;
  width:100%;
  height:100%;
  background:rgba(0,0,0,0.9);
  padding:50px 20px;
  box-sizing:border-box;
  overflow:auto;
  z-index:10000;
}
#terms-content{
  background:#111;
  color:white;
  padding:25px;
  border-radius:15px;
  max-width:800px;
  margin:auto;
  line-height:1.5;
}
#close-terms{
  float:right;
  font-size:18px;
  background:#17a2b8;
  color:white;
  border:none;
  border-radius:8px;
  padding:5px 10px;
  cursor:pointer;
}
.category-span{
  font-size:0.85em;
  color:#aaa;
  margin-left:10px;
}
button.add-btn{
  background:#007bff;
  color:#fff;
  border:none;
  padding:10px 15px;
  border-radius:12px;
  cursor:pointer;
  margin-bottom:15px;
}
button.add-btn:hover{
  background:#0056b3;
}
</style>
</head>
<body>

<div class="page-container">
  <header>ThoughtHive</header>
  <div class="container">
    <input type="text" id="search-bar" placeholder="Search articles by title...">
    <select id="category-filter">
      <option value="">All Categories</option>
      <option value="Animal">Animal</option>
      <option value="Cars">Cars</option>
      <option value="Engineering">Engineering</option>
      <option value="Technology">Technology</option>
      <option value="Lifestyle">Lifestyle</option>
      <option value="Education">Education</option>
      <option value="Science">Science</option>
      <option value="Travel">Travel</option>
      <option value="Health & Fitness">Health & Fitness</option>
      <option value="Art & Design">Art & Design</option>
      <option value="Sports">Sports</option>
      <option value="Music">Music</option>
      <option value="Food & Recipes">Food & Recipes</option>
      <option value="History & Culture">History & Culture</option>
      <option value="Movies & Entertainment">Movies & Entertainment</option>
    </select>
    <button class="add-btn" onclick="window.location.href='add-article.html'">Add Article</button>
    <div id="articles"></div>
  </div>
</div>

<footer>&copy; 2025 ThoughtHive</footer>
<button id="info-btn">i</button>

<div id="terms-modal">
  <div id="terms-content">
    <button id="close-terms">Close âœ–</button>
    <h2>Terms & Conditions</h2>
    <p>
      Welcome to ThoughtHive. The developer is <strong>not responsible</strong> for user content. Users must respect dignity and rights of others and avoid posting offensive, illegal, or harmful content. You are responsible for your posts.
    </p>
  </div>
</div>

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

<script>
const firebaseConfig = {
  apiKey: "AIzaSyAQ4oeDRpMPkpxtcxq-xe7qRwUfIrhUztw",
  authDomain: "thoughthive-ebf0d.firebaseapp.com",
  projectId: "thoughthive-ebf0d",
  storageBucket: "thoughthive-ebf0d.firebasestorage.app",
  messagingSenderId: "254009291887",
  appId: "1:254009291887:web:b5ce7301fb673ba257499a",
  measurementId: "G-5C2Q4SDZ3Y"
};
firebase.initializeApp(firebaseConfig);
const db = firebase.firestore();

let allArticles = [];
db.collection('articles').orderBy('timestamp','desc').onSnapshot(snapshot=>{
  allArticles=[];
  snapshot.forEach(doc=>allArticles.push({id:doc.id,...doc.data()}));
  renderArticles(allArticles);
});

function renderArticles(articles){
  const div = document.getElementById('articles');
  div.innerHTML='';
  articles.forEach(article=>{
    const aDiv = document.createElement('div');
    aDiv.className='article-title';
    aDiv.innerHTML = `${article.title} <span class="category-span">[${article.category || 'General'}]</span>`;
    aDiv.onclick = ()=>{ window.location.href='article.html?id='+article.id; }
    div.appendChild(aDiv);
  });
}

document.getElementById('search-bar').addEventListener('input', ()=>{filterArticles();});
document.getElementById('category-filter').addEventListener('change', ()=>{filterArticles();});

function filterArticles(){
  const query=document.getElementById('search-bar').value.toLowerCase();
  const category=document.getElementById('category-filter').value;
  let filtered = allArticles.filter(a=>a.title.toLowerCase().includes(query));
  if(category) filtered = filtered.filter(a=>a.category===category);
  renderArticles(filtered);
}

const infoBtn = document.getElementById('info-btn');
const termsModal = document.getElementById('terms-modal');
const closeTerms = document.getElementById('close-terms');
infoBtn.onclick = ()=>{ termsModal.style.display='block'; }
closeTerms.onclick = ()=>{ termsModal.style.display='none'; }
window.onclick = (event)=>{ if(event.target==termsModal) termsModal.style.display='none'; }
</script>
</body>
</html>
