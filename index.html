<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ThoughtHive</title>
<style>
  body {
    margin: 0;
    font-family: Arial, sans-serif;
    background: #121212;
    color: #fff;
    display: flex;
    flex-direction: column;
    min-height: 100vh;
  }

  .page-container {
    flex: 1;
    display: flex;
    flex-direction: column;
    padding: 20px;
    box-sizing: border-box;
    background: rgba(0,0,0,0.4);
    backdrop-filter: blur(12px);
  }

  header {
    text-align: center;
    font-size: 2em;
    font-weight: bold;
    padding: 20px;
  }

  .container {
    max-width: 600px;
    margin: 0 auto;
    flex: 1;
  }

  #search-bar {
    width: 100%;
    padding: 10px;
    border-radius: 10px;
    border: none;
    margin-bottom: 20px;
    font-size: 1em;
    background: rgba(255,255,255,0.1);
    color: #fff;
  }

  #articles {
    display: flex;
    flex-direction: column;
    gap: 15px;
  }

  .article-title {
    background: rgba(255,255,255,0.05);
    padding: 15px;
    border-radius: 15px;
    cursor: pointer;
    backdrop-filter: blur(5px);
    font-weight: bold;
    transition: 0.3s;
  }

  .article-title:hover {
    background: rgba(255,255,255,0.15);
  }

  button.add-btn {
    margin-bottom:15px;
    padding:10px;
    border:none;
    border-radius:10px;
    background:#007bff;
    color:white;
    cursor:pointer;
    font-weight:bold;
    width:100%;
  }

  button.add-btn:hover { background:#0056b3; }

  footer {
    text-align: center;
    padding: 10px;
    font-size: 0.9em;
  }

  #info-btn {
    position: fixed;
    bottom: 20px;
    right: 20px;
    font-size: 22px;
    width: 50px;
    height: 50px;
    border-radius: 50%;
    border: none;
    background: rgba(23,162,184,0.8);
    color: white;
    cursor: pointer;
    font-weight: bold;
    backdrop-filter: blur(5px);
    z-index: 9999;
  }

  /* Terms modal */
  #terms-modal {
    display: none;
    position: fixed;
    top:0; left:0;
    width:100%; height:100%;
    background: rgba(0,0,0,0.8);
    padding:50px 20px;
    box-sizing:border-box;
    overflow:auto;
    z-index: 10000;
  }

  #terms-content {
    background:#1e1e1e;
    color:white;
    padding:25px;
    border-radius:15px;
    max-width:800px;
    margin:auto;
    line-height:1.5;
  }

  #close-terms {
    float:right;
    font-size:18px;
    background:#17a2b8;
    color:white;
    border:none;
    border-radius:8px;
    padding:5px 10px;
    cursor:pointer;
  }
</style>
</head>
<body>

<div class="page-container">
  <header>ThoughtHive</header>
  <div class="container">
    <input type="text" id="search-bar" placeholder="Search articles by title...">
    <button class="add-btn" onclick="window.location.href='add-article.html'">Add Article</button>
    <div id="articles"></div>
  </div>
</div>

<footer>&copy; 2025 ThoughtHive</footer>
<button id="info-btn">i</button>

<div id="terms-modal">
  <div id="terms-content">
    <button id="close-terms">Close âœ–</button>
    <h2>Terms & Conditions</h2>
    <p>
      Welcome to ThoughtHive. The developer is <strong>not responsible</strong> for any content posted by users. Users must respect the dignity and rights of others and avoid posting offensive, illegal, or harmful content. You are responsible for what you post. Violations may result in removal of content or access restriction.
    </p>
  </div>
</div>

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

<script>
const firebaseConfig = {
  apiKey: "AIzaSyAQ4oeDRpMPkpxtcxq-xe7qRwUfIrhUztw",
  authDomain: "thoughthive-ebf0d.firebaseapp.com",
  projectId: "thoughthive-ebf0d",
  storageBucket: "thoughthive-ebf0d.firebasestorage.app",
  messagingSenderId: "254009291887",
  appId: "1:254009291887:web:b5ce7301fb673ba257499a",
  measurementId: "G-5C2Q4SDZ3Y"
};
firebase.initializeApp(firebaseConfig);
const db = firebase.firestore();

// Load articles
let allArticles = [];
db.collection('articles').orderBy('timestamp','desc').onSnapshot(snapshot=>{
  allArticles = [];
  snapshot.forEach(doc=>{
    allArticles.push({id: doc.id, ...doc.data()});
  });
  renderArticles(allArticles);
});

function renderArticles(articles){
  const div = document.getElementById('articles');
  div.innerHTML='';
  articles.forEach(article=>{
    const aDiv = document.createElement('div');
    aDiv.className = 'article-title';
    aDiv.textContent = article.title;
    aDiv.onclick = ()=>{ window.location.href='article.html?id='+article.id; }
    div.appendChild(aDiv);
  });
}

document.getElementById('search-bar').addEventListener('input', (e)=>{
  const q = e.target.value.toLowerCase();
  renderArticles(allArticles.filter(a=>a.title.toLowerCase().includes(q)));
});

const infoBtn = document.getElementById('info-btn');
const termsModal = document.getElementById('terms-modal');
const closeTerms = document.getElementById('close-terms');
infoBtn.onclick = ()=>{ termsModal.style.display='block'; }
closeTerms.onclick = ()=>{ termsModal.style.display='none'; }
window.onclick = (event)=>{ if(event.target==termsModal) termsModal.style.display='none'; }
</script>

</body>
</html>
