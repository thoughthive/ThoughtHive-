<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ThoughtHive </title>
  
<meta name="description" content="ThoughtHive is a platform to share articles and ideas with the world. Post, read, and interact with articles easily.">
<meta name="keywords" content="ThoughtHive, articles, blogging, share thoughts, online articles, user articles">
<meta name="author" content="Your Name">
<meta name="robots" content="index, follow">
<style>
  /* Sticky footer setup */
  body {
    display: flex;
    flex-direction: column;
    min-height: 100vh;
    margin: 0;
    font-family: Arial, sans-serif;
    background: #e0f0ff;
  }

  .page-container {
    flex: 1;
    display: flex;
    flex-direction: column;
  }

  header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    background: #007bff;
    color: white;
    padding: 15px 20px;
  }

  header h1 { margin: 0; }

  header button {
    font-size: 24px;
    background: white;
    color: #007bff;
    border: none;
    border-radius: 50%;
    width: 40px;
    height: 40px;
    cursor: pointer;
  }

  .container {
    flex: 1; /* fill available space */
    max-width: 600px;
    margin: 20px auto;
  }

  #search-bar { width: 100%; padding: 10px; border-radius: 5px; border: 1px solid #ccc; margin-bottom: 20px; }

  #articles { display: flex; flex-direction: column; gap: 10px; }

  .article-title {
    background: white;
    padding: 10px;
    border-radius: 10px;
    box-shadow: 0 0 5px #aaa;
    cursor: pointer;
  }

  .article-full {
    background: white;
    padding: 15px;
    border-radius: 10px;
    box-shadow: 0 0 10px #aaa;
    margin-bottom: 20px;
  }

  .article-full img { max-width: 100%; border-radius: 5px; margin-top: 10px; }

  #add-article-form {
    display: none;
    background: white;
    padding: 20px;
    border-radius: 10px;
    box-shadow: 0 0 10px #aaa;
    margin-bottom: 20px;
  }

  input, textarea { width: 100%; padding: 10px; margin: 10px 0; border-radius: 5px; border: 1px solid #ccc; }

  button.submit-btn, button.delete-btn {
    background: #007bff;
    color: white;
    border: none;
    cursor: pointer;
    padding: 10px;
    border-radius: 5px;
  }

  button.submit-btn:hover, button.delete-btn:hover { background: #0056b3; }

  button.delete-btn { background: #ff4d4d; margin-top: 10px; }

  button.delete-btn:hover { background: #cc0000; }

  footer {
    background:#007bff;
    color:white;
    text-align:center;
    padding:15px 10px;
    font-size:14px;
  }

  a.terms-link { color:white; text-decoration:underline; cursor:pointer; }

  #terms-modal {
    display:none;
    position:fixed;
    top:0; left:0;
    width:100%; height:100%;
    background: rgba(0,0,0,0.8);
    overflow:auto;
    padding:50px 20px;
    box-sizing:border-box;
  }

  #terms-content {
    background:white;
    color:black;
    padding:20px;
    border-radius:10px;
    max-width:800px;
    margin: auto;
  }

  #close-terms {
    float:right;
    cursor:pointer;
    font-size:20px;
    background:#007bff;
    color:white;
    border:none;
    border-radius:5px;
    padding:5px 10px;
  }
</style>
</head>
<body>

<div class="page-container">
  <header>
    <h1>ThoughtHive </h1>
    <button id="plus-btn">+</button>
  </header>

  <div class="container">
    <input type="text" id="search-bar" placeholder="Search articles by title...">

    <div id="add-article-form">
      <h2>Add Article</h2>
      <input type="text" id="article-title-input" placeholder="Article Title" required>
      <textarea id="article-content-input" placeholder="Write your article here..." rows="4" required></textarea>
      <input type="text" id="article-author-input" placeholder="Your Name" required>
      <input type="file" id="article-image-input">
      <button class="submit-btn" onclick="postArticle()">Post Article</button>
    </div>

    <div id="articles"></div>
  </div>
</div>

<footer>
  <p>&copy; 2025 ThoughtHive | <span class="terms-link" onclick="showTerms()">Terms & Conditions</span></p>
</footer>

<!-- Terms & Conditions Modal -->
<div id="terms-modal">
  <div id="terms-content">
    <button id="close-terms" onclick="closeTerms()">Close ✖</button>
    <h2>Terms & Conditions</h2>
    <p>
      Welcome to ThoughtHive. By using this platform, you agree that the developer is not responsible for any content posted by users that may be offensive, harmful, illegal, or exploitative.
      Users must respect the rights and dignity of every human being and ensure that their posts do not threaten, harass, or harm anyone in any way.
      The developer disclaims any liability for misuse of this platform, including but not limited to sharing inappropriate material, harassment, or exploitation.
      Users are fully responsible for the content they create and share. ThoughtHive is intended for positive and respectful sharing of ideas, and anyone violating these terms may be removed from the platform.
      By using this service, you agree to follow these rules and respect the rights, safety, and well-being of others at all times.
    </p>
  </div>
</div>

<!-- Firebase SDK -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-storage-compat.js"></script>

<script>
const firebaseConfig = {
    apiKey: "AIzaSyAQ4oeDRpMPkpxtcxq-xe7qRwUfIrhUztw",
    authDomain: "thoughthive-ebf0d.firebaseapp.com",
    projectId: "thoughthive-ebf0d",
    storageBucket: "thoughthive-ebf0d.firebasestorage.app",
    messagingSenderId: "254009291887",
    appId: "1:254009291887:web:b5ce7301fb673ba257499a",
    measurementId: "G-5C2Q4SDZ3Y"
};
firebase.initializeApp(firebaseConfig);
const db = firebase.firestore();
const storage = firebase.storage();

// Toggle Add Article form
const plusBtn = document.getElementById('plus-btn');
const addForm = document.getElementById('add-article-form');
plusBtn.onclick = () => { addForm.style.display = addForm.style.display === 'none' ? 'block' : 'none'; }

// Post Article
async function postArticle() {
    try {
        const title = document.getElementById('article-title-input').value;
        const content = document.getElementById('article-content-input').value;
        const author = document.getElementById('article-author-input').value;
        const imageFile = document.getElementById('article-image-input').files[0];
        if (!title || !content || !author) { alert('Fill all fields!'); return; }

        let imageUrl = '';
        if (imageFile) {
            const storageRef = storage.ref('images/' + Date.now() + '_' + imageFile.name);
            await storageRef.put(imageFile);
            imageUrl = await storageRef.getDownloadURL();
        }

        await db.collection('articles').add({
            title, content, author, imageUrl,
            timestamp: firebase.firestore.FieldValue.serverTimestamp()
        });

        alert('Article posted successfully!');
        document.getElementById('article-title-input').value = '';
        document.getElementById('article-content-input').value = '';
        document.getElementById('article-author-input').value = '';
        document.getElementById('article-image-input').value = '';
        addForm.style.display = 'none';
    } catch(err) {
        alert('Error posting: ' + err.message);
        console.error(err);
    }
}

// Load and display article titles
let allArticles = [];
db.collection('articles').orderBy('timestamp','desc').onSnapshot(snapshot => {
    allArticles = [];
    snapshot.forEach(doc => allArticles.push({id: doc.id, ...doc.data()}));
    renderArticles(allArticles);
});

// Render article titles
function renderArticles(articles) {
    const articlesDiv = document.getElementById('articles');
    articlesDiv.innerHTML = '';
    articles.forEach(article => {
        const div = document.createElement('div');
        div.className = 'article-title';
        div.textContent = article.title;
        div.onclick = () => showFullArticle(article);
        articlesDiv.appendChild(div);
    });
}

// Show full article with delete option and close button


function showFullArticle(article) {
    const articlesDiv = document.getElementById('articles');
    articlesDiv.innerHTML = '';

    const div = document.createElement('div');
    div.className = 'article-full';
    div.style.position = 'relative'; // to position close button

    // Close button top-right
    const closeBtn = document.createElement('button');
    closeBtn.textContent = '✖ Close';
    closeBtn.style.position = 'absolute';
    closeBtn.style.top = '10px';
    closeBtn.style.right = '10px';
    closeBtn.style.background = '#007bff';
    closeBtn.style.color = 'white';
    closeBtn.style.border = 'none';
    closeBtn.style.borderRadius = '5px';
    closeBtn.style.padding = '5px 10px';
    closeBtn.style.cursor = 'pointer';
    closeBtn.onclick = () => renderArticles(allArticles);
    div.appendChild(closeBtn);

    // Article content
    div.innerHTML += `
        <h2>${article.title}</h2>
        <p>${article.content}</p>
        <p><strong>By:</strong> ${article.author}</p>
        ${article.imageUrl ? `<img src="${article.imageUrl}">` : ''}
        <button class="delete-btn" onclick="deleteArticle('${article.id}')">Delete Article</button>
    `;

    articlesDiv.appendChild(div);
}


// Delete article
async function deleteArticle(id) {
    if (confirm('Are you sure you want to delete this article?')) {
        await db.collection('articles').doc(id).delete();
        alert('Article deleted!');
    }
}

// Search articles
const searchBar = document.getElementById('search-bar');
searchBar.addEventListener('input', () => {
    const query = searchBar.value.toLowerCase();
    const filtered = allArticles.filter(a => a.title.toLowerCase().includes(query));
    renderArticles(filtered);
});

// Terms & Conditions modal
function showTerms() { document.getElementById('terms-modal').style.display = 'block'; }
function closeTerms() { document.getElementById('terms-modal').style.display = 'none'; }
</script>

</body>
</html>
